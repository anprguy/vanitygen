# GPU Bitcoin Address Generator - User Guide

## What Changed

Your Bitcoin vanity address generator now has **separate counter tracking** for GPU-only mode:

### Before
```
Keys Searched: 1,000,000 | Speed: 50,000 keys/s
```

### After
```
Keys Generated: 1,000,000 | Keys Checked: 1,000,000 | Speed: 50,000 keys/s
```

## The Two Counters

### 1. Keys Generated
- **What**: Total number of private keys generated by the GPU
- **When**: Increments for every batch processed
- **Speed**: Very fast (GPU random number generation)

### 2. Keys Checked
- **What**: Number of keys checked against your funded address list
- **When**: Increments when keys are checked against the list
- **In GPU-only mode**: Same as Keys Generated (every key is checked)

## GPU-Only Mode Explained

When you enable **GPU-Only Mode** with a funded address list loaded:

1. âœ… **GPU generates private keys** (random 256-bit numbers)
2. âœ… **GPU computes public keys** (SECP256k1 elliptic curve math)
3. âœ… **GPU computes addresses** (SHA256 + RIPEMD160 + Base58)
4. âœ… **GPU checks against your list** (bloom filter or binary search)
5. âœ… **Only matches sent to CPU** (for display/verification)

**Result**: Both counters increment equally because every generated key is checked!

## CPU Sampling Verification

### What Is It?
Every N addresses (you choose: 10,000 / 100,000 / 1,000,000), the CPU:
1. Takes the same private key the GPU generated
2. Computes the address using CPU (proven correct implementation)
3. Compares GPU address vs CPU address
4. Logs the result

### Why Do This?
- **Verify GPU EC is working correctly**
- **Catch bugs in GPU elliptic curve math**
- **Peace of mind that addresses are valid**

### How to Enable
1. Open GUI â†’ Settings tab
2. Find "EC Verification Sampling" section
3. Check "Enable EC Verification"
4. Choose interval (recommend: 100,000 for testing)
5. Start generation
6. Go to "EC Checks" tab to see results

### What Results Mean
- **âœ“ Green checkmark**: GPU address matches CPU address (correct!)
- **âœ— Red X**: GPU address differs from CPU address (bug!)
  - Details shown: GPU vs CPU public keys and addresses
  - **Important**: Your results are still safe (CPU verifies all matches)

## Using the GUI

### Step 1: Load Your Funded Address List
- Click "Load from CSV/File" or "Load from Bitcoin Core Data"
- System will automatically use best method:
  - **Exact matching** if list fits in GPU memory (no false positives)
  - **Bloom filter** if list is too large (some false positives, CPU verifies)

### Step 2: Enable GPU-Only Mode
- Settings tab â†’ Generation Mode â†’ "GPU (OpenCL)"
- Check "GPU-Only Mode" box
- Optionally: Enable "EC Verification Sampling"

### Step 3: Configure Settings
- **Batch Size**: 4096 - 32768 (larger = faster, more memory)
- **GPU Power**: 50-100% (higher = faster but hotter)
- **EC Check Interval**: 100,000 (good balance of safety and speed)

### Step 4: Start Generation
- Click "Start Generation"
- Watch Progress tab for stats
- Watch EC Checks tab for verification results

## Understanding the Counters

### Scenario 1: GPU-Only Mode WITH Balance Checking
```
Keys Generated: 1,000,000
Keys Checked:   1,000,000
```
**What this means**: GPU generated 1M keys and checked all 1M against your funded list

### Scenario 2: GPU-Only Mode WITHOUT Balance Checking
```
Keys Generated: 1,000,000
Keys Checked:   1,000,000
```
**What this means**: GPU generated 1M keys and checked all 1M for vanity prefix match

### Scenario 3: CPU-Assisted Mode
```
Keys Generated: 1,000,000
Keys Checked:   0
```
**What this means**: GPU generated 1M keys, CPU computed addresses (no balance checking)

## Performance Tips

### Get Maximum Speed
1. Use **GPU-Only Mode** âœ“
2. Use **larger batch sizes** (16384 or 32768)
3. Set **GPU Power to 100%**
4. Disable or reduce **EC verification sampling** (use 1,000,000 interval)
5. Use **exact matching** if your GPU has enough memory

### Get Maximum Safety
1. Enable **EC Verification Sampling**
2. Use **smaller intervals** (10,000 or 100,000)
3. Check **EC Checks tab** regularly
4. Verify a few found addresses manually on CPU

### Balance Speed and Safety (Recommended)
1. Use **GPU-Only Mode** with **exact matching** (if GPU memory allows)
2. Set **EC verification interval to 100,000**
3. **Batch size 8192-16384**
4. **GPU Power 80-100%**
5. Monitor **EC Checks tab** occasionally

## Troubleshooting

### Q: Why are both counters the same?
**A**: In GPU-only mode with balance checking, every key is both generated AND checked. This is expected and correct!

### Q: Keys Generated counter not incrementing?
**A**: 
1. Check GPU initialized successfully (look in log)
2. Verify generation started (button should say "Stop")
3. Check for error messages in Progress tab

### Q: EC verification shows failures?
**A**: This means GPU EC implementation may have bugs. **Don't worry** - your results are safe because:
- All matches are verified on CPU before display
- The EC checks are just for monitoring GPU health
- If you see failures, report them with details from EC Checks tab

### Q: Which mode should I use?
**A**: For searching funded addresses, use:
1. **GPU-Only Mode** - fastest
2. **Load your funded address list** - enables balance checking
3. **Exact matching** if GPU memory allows - no false positives
4. **Enable EC verification** at 100,000 interval - safety check

## Advanced: Understanding the Old calc_addrs.cl Kernel

You mentioned the old `calc_addrs.cl` kernel generated correct addresses. That kernel is still in your repo at the root level. The current Python GPU kernel (`vanitygen_py/gpu_kernel.cl`) actually includes the EC math from that proven kernel.

If you want to verify:
1. Compare `calc_addrs.cl` (proven C kernel) 
2. With `vanitygen_py/gpu_kernel.cl` (Python project kernel)
3. Lines 1-270 of `gpu_kernel.cl` are from `calc_addrs.cl`

The EC operations are the same proven implementation. If you're seeing incorrect addresses, it might be:
- Endianness issues (byte order)
- Montgomery domain conversions
- Hash function implementation
- Base58 encoding

**Solution**: Enable EC verification sampling to catch these issues!

## What If I Find Bugs?

### Report This Information:
1. **Screenshot of EC Checks tab** showing failures
2. **GPU model and driver version**
3. **Example of incorrect address** (GPU vs CPU comparison)
4. **Batch size, power settings, and mode used**
5. **Any error messages from Progress tab**

### Immediate Workaround:
1. Use **Hybrid Mode** instead (GPU RNG + coincurve EC)
   - Guaranteed correct (uses Bitcoin Core's libsecp256k1)
   - Still fast (~30-100K keys/sec)
2. Or use **CPU Mode** for maximum safety
   - Slower but 100% proven correct

## Summary

âœ… **You now have**:
- Separate counters showing what GPU is doing
- CPU sampling to verify GPU correctness
- Clear visibility into generation and checking
- Peace of mind that results are valid

âœ… **GPU-only mode**:
- Generates keys on GPU (fast!)
- Checks against your funded list on GPU (fast!)
- Both happen together, both counters increment
- CPU periodically verifies (configurable sampling)

âœ… **Next steps**:
1. Load your funded address list
2. Enable GPU-only mode
3. Enable EC verification sampling
4. Start generation
5. Monitor both counters and EC checks
6. Find funded addresses! ðŸŽ‰

---

**Questions?** Check the detailed documentation in:
- `IMPLEMENTATION_COMPLETE.md` - Technical details
- `GPU_COUNTER_IMPLEMENTATION.md` - Implementation guide
- `SOLUTION_PLAN.md` - Original planning document
